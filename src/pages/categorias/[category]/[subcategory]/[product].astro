---
import BaseLayout from "@/layouts/BaseLayout.astro";
import categoriesData from "@/data/categories.json";
import productsData from "@/data/products.json";
import { AddToCartButton } from "@/components/AddToCartButton/AddToCartButton";

const category = Astro.params.category || "";
const subcategory = Astro.params.subcategory || "";
const productSlug = Astro.params.product || "";

// Find category and subcategory info
const categoryInfo = categoriesData.find((c) => c.slug === category);
const subcategoryInfo = categoryInfo?.subcategories?.find(
  (s) => s.slug === subcategory
);

// Find product
const productInfo = productsData.find((p) => p.id === productSlug);

if (!categoryInfo || !subcategoryInfo || !productInfo) {
  return Astro.redirect("/404");
}

const title = `${productInfo.name} - ${subcategoryInfo.name}`;
const description = productInfo.description;

// Product images and video
const productMedia = [
  ...productInfo.images.map((img: string) => ({ type: "image", url: img })),
  { type: "video", url: "https://www.w3schools.com/html/mov_bbb.mp4" }, // Video de ejemplo
];

// Downloadable files
const downloadableFiles = [
  { name: "Manual de Armado", type: "PDF", size: "2.5 MB", url: "#" },
  { name: "Guía de Medidas", type: "PDF", size: "1.8 MB", url: "#" },
  { name: "Certificado PEFC", type: "PDF", size: "850 KB", url: "#" },
  { name: "Instrucciones de Cuidado", type: "PDF", size: "1.2 MB", url: "#" },
];

// Trust features
const trustFeatures = [
  {
    icon: "certificate",
    title: "Certificado PEFC",
    description:
      "Fabricamos nuestros muebles con madera sostenible con certificado PEFC.",
  },
  {
    icon: "wood",
    title: "Madera de verdad",
    description:
      "Nuestros muebles tienen nudos y vetas porque son de madera de verdad. Madera que nos apasiona.",
  },
  {
    icon: "location",
    title: "Made in Gipuzkoa",
    description:
      "Producción local en nuestra fábrica de Aizarnazabal, Gipuzkoa.",
  },
  {
    icon: "distance",
    title: "Creemos en la proximidad",
    description:
      "Creemos en la proximidad. Nuestro proveedor de colchones está a 8 kms de nuestra fábrica.",
  },
];
---

<BaseLayout title={title} description={description}>
  <div class="product-page">
    <!-- Breadcrumb -->
    <div class="breadcrumb-container">
      <nav class="breadcrumb">
        <a href="/">Inicio</a>
        <span class="separator">/</span>
        <a href="/categorias">Categorías</a>
        <span class="separator">/</span>
        <a href={`/categorias/${category}`}>{categoryInfo.name}</a>
        <span class="separator">/</span>
        <a href={`/categorias/${category}/${subcategory}`}
          >{subcategoryInfo.name}</a
        >
        <span class="separator">/</span>
        <span class="current">{productInfo.name}</span>
      </nav>
    </div>

    <!-- Product Main Section -->
    <section class="product-main">
      <!-- Gallery Section -->
      <div class="gallery-section">
        <div class="gallery-thumbnails">
          {
            productMedia.map((media, index) => (
              <button
                class={`thumbnail ${index === 0 ? "active" : ""}`}
                data-index={index}
                data-type={media.type}
              >
                {media.type === "image" ? (
                  <img
                    src={media.url}
                    alt={`${productInfo.name} - Vista ${index + 1}`}
                  />
                ) : (
                  <div class="video-thumbnail">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                    >
                      <polygon points="5 3 19 12 5 21 5 3" />
                    </svg>
                  </div>
                )}
              </button>
            ))
          }
        </div>

        <div class="gallery-main">
          {
            productMedia.map((media, index) => (
              <div
                class={`media-item ${index === 0 ? "active" : ""}`}
                data-index={index}
              >
                {media.type === "image" ? (
                  <img src={media.url} alt={productInfo.name} />
                ) : (
                  <video controls preload="metadata">
                    <source src={media.url} type="video/mp4" />
                    Tu navegador no soporta el elemento de video.
                  </video>
                )}
              </div>
            ))
          }

          <!-- Badges -->
          <div class="product-badges">
            {
              productInfo.inStock && (
                <span class="badge badge-new">NOVEDAD</span>
              )
            }
            {
              !productInfo.inStock && (
                <span class="badge badge-sold">AGOTADO</span>
              )
            }
          </div>
        </div>
      </div>

      <!-- Product Info Section -->
      <div class="product-info">
        <h1 class="product-title">{productInfo.name}</h1>
        <p class="product-subtitle">{subcategoryInfo.name}</p>

        <!-- Quick Actions Links -->
        <div class="quick-links">
          <a href="#detalles" class="quick-link">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 2v20M2 12h20"></path>
            </svg>
            Detalles del producto y medidas
          </a>
          <a href="#ejemplos" class="quick-link">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"
              ></rect>
              <line x1="7" y1="2" x2="7" y2="22"></line>
              <line x1="17" y1="2" x2="17" y2="22"></line>
              <line x1="2" y1="12" x2="22" y2="12"></line>
              <line x1="2" y1="7" x2="7" y2="7"></line>
              <line x1="2" y1="17" x2="7" y2="17"></line>
              <line x1="17" y1="17" x2="22" y2="17"></line>
              <line x1="17" y1="7" x2="22" y2="7"></line>
            </svg>
            Ejemplos de uso en videos e imágenes
          </a>
          <a href="#descargas" class="quick-link">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Archivos descargables
          </a>
          <a href="#confianza" class="quick-link">
            <svg
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            Madera ecológica, fabricación local
          </a>
        </div>

        <!-- Add to Cart -->
        <div class="add-to-cart-section">
          <div class="quantity-selector">
            <button
              class="quantity-btn"
              id="decreaseQty"
              aria-label="Disminuir cantidad"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
            <input
              type="number"
              id="quantity"
              value="1"
              min="1"
              max="10"
              readonly
            />
            <button
              class="quantity-btn"
              id="increaseQty"
              aria-label="Aumentar cantidad"
            >
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>

         <AddToCartButton product={{
          description: productInfo.description,
          id: productInfo.id,
          name: productInfo.name,
          image: productInfo.images[0],
          inStock: productInfo.inStock,
          quantity: 1,
         }} client:load />
        </div>

        <!-- Product Meta -->
        <div class="product-meta">
          <div class="meta-item">
            <span class="meta-label">Marca:</span>
            <span class="meta-value">{productInfo.brand}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Material:</span>
            <span class="meta-value">{productInfo.material}</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Disponibilidad:</span>
            <span
              class={`meta-value ${productInfo.inStock ? "in-stock" : "out-stock"}`}
            >
              {productInfo.inStock ? "En stock" : "Agotado"}
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Product Details Section -->
    <section id="detalles" class="content-section">
      <div class="section-tabs">
        <button class="tab-button active" data-tab="detalles-tab"
          >Detalles del producto</button
        >
        <button class="tab-button" data-tab="medidas-tab">Medidas</button>
        <button class="tab-button" data-tab="caracteristicas-tab"
          >Características</button
        >
        <button class="tab-button" data-tab="acabados-tab">Acabados</button>
        <button class="tab-button" data-tab="montaje-tab">Montaje</button>
        <button class="tab-button" data-tab="envio-tab">Envío</button>
      </div>

      <div class="tab-content">
        <div id="detalles-tab" class="tab-pane active">
          <div class="details-content">
            <h2>Detalles del producto</h2>
            <p>{productInfo.description}</p>
            <p>
              Cama individual para colchón de 90 cm. Una cama con cabecero y dos
              cajones de almacenaje que llevan ruedas ocultas en la parte
              inferior, fabricada con madera ecológica natural y disponible en
              dos largos: para colchón de 190 y 200 cm. Muy práctica para
              guardar ropa de cama.
            </p>

            <div class="details-list">
              <h3>Características</h3>
              <ul>
                <li>Madera maciza de {productInfo.material}</li>
                <li>Acabado natural con certificación PEFC</li>
                <li>Fabricación local en Gipuzkoa</li>
                <li>Fácil montaje con instrucciones incluidas</li>
                <li>Garantía de 2 años</li>
              </ul>
            </div>

            <div class="important-info">
              <h3>Importante</h3>
              <ul>
                <li>
                  Esta cama no incluye los textiles ni los cojines decorativos.
                </li>
                <li>Los cajones llevan ruedas para poder deslizarse.</li>
                <li>Compatible con nuestra barrera de protección.</li>
              </ul>
            </div>
          </div>
        </div>

        <div id="medidas-tab" class="tab-pane">
          <div class="measurements-content">
            <div class="measurements-diagram">
              <img
                src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&q=80"
                alt="Diagrama de medidas"
              />
            </div>
            <div class="measurements-specs">
              <h3>Especificaciones</h3>
              <div class="spec-grid">
                <div class="spec-item">
                  <span class="spec-label">Altura</span>
                  <span class="spec-value">Total: 68,5 cm</span>
                </div>
                <div class="spec-item">
                  <span class="spec-label">Anchura</span>
                  <span class="spec-value">Total: 99 cm</span>
                </div>
                <div class="spec-item">
                  <span class="spec-label">Longitud</span>
                  <span class="spec-value"
                    >Total 190: 197,5 cm<br />Total 200: 207,5 cm</span
                  >
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="caracteristicas-tab" class="tab-pane">
          <div class="details-content">
            <h2>Características técnicas</h2>
            <div class="specs-table">
              <div class="spec-row">
                <span class="spec-name">Material principal</span>
                <span class="spec-detail"
                  >{productInfo.material} macizo certificado PEFC</span
                >
              </div>
              <div class="spec-row">
                <span class="spec-name">Acabado</span>
                <span class="spec-detail"
                  >Aceite natural incoloro, protección UV</span
                >
              </div>
              <div class="spec-row">
                <span class="spec-name">Peso aproximado</span>
                <span class="spec-detail">45 kg (dependiendo del tamaño)</span>
              </div>
              <div class="spec-row">
                <span class="spec-name">Capacidad de carga</span>
                <span class="spec-detail">Hasta 150 kg</span>
              </div>
              <div class="spec-row">
                <span class="spec-name">Certificaciones</span>
                <span class="spec-detail">PEFC, FSC, Emisiones bajas VOC</span>
              </div>
              <div class="spec-row">
                <span class="spec-name">Origen</span>
                <span class="spec-detail">Fabricado en Gipuzkoa, España</span>
              </div>
            </div>
          </div>
        </div>

        <div id="acabados-tab" class="tab-pane">
          <div class="details-content">
            <h2>Acabados disponibles</h2>
            <p>
              Todos nuestros muebles están acabados con aceites naturales que
              protegen la madera y realzan su belleza natural.
            </p>

            <div class="finishes-grid">
              <div class="finish-option">
                <div class="finish-swatch" style="background: #d4b896;"></div>
                <h4>Natural</h4>
                <p>Aceite incoloro que mantiene el tono natural de la madera</p>
              </div>
              <div class="finish-option">
                <div class="finish-swatch" style="background: #c19a6b;"></div>
                <h4>Miel</h4>
                <p>Acabado cálido con tonos dorados</p>
              </div>
              <div class="finish-option">
                <div class="finish-swatch" style="background: #8b7355;"></div>
                <h4>Nogal</h4>
                <p>Tono más oscuro y elegante</p>
              </div>
              <div class="finish-option">
                <div class="finish-swatch" style="background: #f5f5f5;"></div>
                <h4>Blanco</h4>
                <p>Acabado en blanco mate suave</p>
              </div>
            </div>
          </div>
        </div>

        <div id="montaje-tab" class="tab-pane">
          <div class="details-content">
            <h2>Montaje</h2>
            <p>
              Todos nuestros muebles vienen con instrucciones detalladas de
              montaje y las herramientas necesarias incluidas.
            </p>

            <div class="assembly-steps">
              <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>Preparación</h4>
                  <p>
                    Verifica que tienes todas las piezas según la lista
                    incluida. Tiempo estimado: 5 min
                  </p>
                </div>
              </div>
              <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>Estructura base</h4>
                  <p>
                    Ensambla el marco principal siguiendo el diagrama. Tiempo
                    estimado: 20 min
                  </p>
                </div>
              </div>
              <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>Montaje final</h4>
                  <p>
                    Ajusta todos los tornillos y verifica la estabilidad. Tiempo
                    estimado: 15 min
                  </p>
                </div>
              </div>
            </div>

            <div class="important-info">
              <h3>Recomendaciones</h3>
              <ul>
                <li>Se recomienda el montaje entre dos personas</li>
                <li>Tiempo total de montaje aproximado: 40-60 minutos</li>
                <li>Incluye todas las herramientas necesarias</li>
              </ul>
            </div>
          </div>
        </div>

        <div id="envio-tab" class="tab-pane">
          <div class="details-content">
            <h2>Envío y devoluciones</h2>

            <div class="shipping-info">
              <div class="info-card">
                <svg
                  width="48"
                  height="48"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                >
                  <rect x="1" y="3" width="15" height="13"></rect>
                  <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                  <circle cx="5.5" cy="18.5" r="2.5"></circle>
                  <circle cx="18.5" cy="18.5" r="2.5"></circle>
                </svg>
                <h4>Envío gratuito</h4>
                <p>En pedidos superiores a 200€ en península</p>
              </div>

              <div class="info-card">
                <svg
                  width="48"
                  height="48"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <h4>Entrega en 5-7 días</h4>
                <p>Plazo estimado para península, 10-15 días para islas</p>
              </div>

              <div class="info-card">
                <svg
                  width="48"
                  height="48"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.5"
                >
                  <polyline points="3 6 5 6 21 6"></polyline>
                  <path
                    d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                  ></path>
                </svg>
                <h4>Devoluciones fáciles</h4>
                <p>30 días para devoluciones sin compromiso</p>
              </div>
            </div>

            <h3 style="margin-top: 2rem;">Política de devoluciones</h3>
            <p>
              Tienes 30 días desde la recepción del producto para realizar una
              devolución. El producto debe estar en perfecto estado, sin uso y
              en su embalaje original.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Examples Section -->
    <section id="ejemplos" class="examples-section">
      <h2>Inspírate con imágenes reales</h2>
      <p class="section-subtitle">
        Mira cómo luce este producto en espacios reales
      </p>

      <div class="examples-grid">
        <div class="example-item large">
          <img
            src="https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?w=1200&q=80"
            alt="Ejemplo de uso 1"
          />
        </div>
        <div class="example-item">
          <img
            src="https://images.unsplash.com/photo-1616594039964-ae9021a400a0?w=600&q=80"
            alt="Ejemplo de uso 2"
          />
        </div>
        <div class="example-item">
          <img
            src="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=600&q=80"
            alt="Ejemplo de uso 3"
          />
        </div>
        <div class="example-item video-item">
          <video
            controls
            poster="https://images.unsplash.com/photo-1631679706909-1844bbd07221?w=600&q=80"
          >
            <source
              src="https://www.w3schools.com/html/mov_bbb.mp4"
              type="video/mp4"
            />
          </video>
          <div class="video-overlay">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="white"
              stroke="white"
              stroke-width="2"
            >
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- Downloads Section -->
    <section id="descargas" class="downloads-section">
      <h2>Archivos descargables</h2>
      <p class="section-subtitle">Descarga manuales, guías y certificados</p>

      <div class="downloads-grid">
        {
          downloadableFiles.map((file) => (
            <a href={file.url} class="download-card" download>
              <div class="download-icon">
                <svg
                  width="32"
                  height="32"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                  <polyline points="14 2 14 8 20 8" />
                  <line x1="12" y1="18" x2="12" y2="12" />
                  <polyline points="9 15 12 18 15 15" />
                </svg>
              </div>
              <div class="download-info">
                <h3>{file.name}</h3>
                <div class="download-meta">
                  <span class="file-type">{file.type}</span>
                  <span class="file-size">{file.size}</span>
                </div>
              </div>
              <div class="download-action">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" y1="15" x2="12" y2="3" />
                </svg>
              </div>
            </a>
          ))
        }
      </div>
    </section>

    <!-- Trust Section -->
    <section id="confianza" class="trust-section">
      <div class="trust-header">
        <h2>Madera ecológica, fabricación local</h2>
      </div>

      <div class="trust-grid-horizontal">
        <div class="trust-card-horizontal">
          <div class="trust-icon-horizontal">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <circle cx="12" cy="8" r="7"></circle>
              <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"
              ></polyline>
            </svg>
          </div>
          <div class="trust-content">
            <h3>Certificado PEFC</h3>
            <p>
              Fabricamos nuestros muebles con madera sostenible con certificado
              PEFC.
            </p>
          </div>
        </div>

        <div class="trust-card-horizontal">
          <div class="trust-icon-horizontal">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <circle cx="12" cy="12" r="6"></circle>
              <circle cx="12" cy="12" r="2"></circle>
            </svg>
          </div>
          <div class="trust-content">
            <h3>Madera de verdad</h3>
            <p>
              Nuestros muebles tienen nudos y vetas porque son de madera de
              verdad. Madera que nos apasiona.
            </p>
          </div>
        </div>

        <div class="trust-card-horizontal">
          <div class="trust-icon-horizontal">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          </div>
          <div class="trust-content">
            <h3>Made in Gipuzkoa</h3>
            <p>
              Producción local en nuestra fábrica de Aizarnazabal, Gipuzkoa.
            </p>
          </div>
        </div>

        <div class="trust-card-horizontal">
          <div class="trust-icon-horizontal">
            <svg
              width="64"
              height="64"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
            >
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
          </div>
          <div class="trust-content">
            <h3>Creemos en la proximidad</h3>
            <p>
              Creemos en la proximidad. Nuestro proveedor de colchones está a 8
              kms de nuestra fábrica.
            </p>
          </div>
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  .product-page {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* Breadcrumb */
  .breadcrumb-container {
    padding: 1.5rem 0;
    border-bottom: 1px solid #e5e7eb;
    margin-bottom: 2rem;
  }

  .breadcrumb {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.875rem;
    flex-wrap: wrap;
  }

  .breadcrumb a {
    color: #6b7280;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .breadcrumb a:hover {
    color: #111827;
  }

  .breadcrumb .separator {
    color: #d1d5db;
  }

  .breadcrumb .current {
    color: #111827;
    font-weight: 500;
  }

  /* Product Main Section */
  .product-main {
    display: grid;
    grid-template-columns: 1fr 480px;
    gap: 4rem;
    margin-bottom: 4rem;
  }

  /* Gallery */
  .gallery-section {
    display: grid;
    grid-template-columns: 100px 1fr;
    gap: 1rem;
  }

  .gallery-thumbnails {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .thumbnail {
    aspect-ratio: 1;
    border: 2px solid transparent;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    background: #f9fafb;
    transition: all 0.2s ease;
    padding: 0;
  }

  .thumbnail:hover {
    border-color: #d1d5db;
  }

  .thumbnail.active {
    border-color: #111827;
  }

  .thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .video-thumbnail {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #1f2937;
    color: white;
  }

  .gallery-main {
    position: relative;
    background: #f9fafb;
    border-radius: 12px;
    overflow: hidden;
    width: 100%;
    height: 600px;
  }

  .media-item {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .media-item.active {
    opacity: 1;
    pointer-events: auto;
    z-index: 1;
  }

  .media-item img,
  .media-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .product-badges {
    position: absolute;
    top: 1rem;
    left: 1rem;
    display: flex;
    gap: 0.5rem;
  }

  .badge {
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.5px;
  }

  .badge-new {
    background: #f97316;
    color: white;
  }

  .badge-sold {
    background: #6b7280;
    color: white;
  }

  /* Product Info */
  .product-info {
    padding-top: 1rem;
  }

  .product-title {
    font-size: 2rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem 0;
    line-height: 1.2;
  }

  .product-subtitle {
    font-size: 1rem;
    color: #6b7280;
    margin: 0 0 2rem 0;
  }

  /* Quick Links */
  .quick-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid #e5e7eb;
  }

  .quick-link {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: #f9fafb;
    border-radius: 8px;
    color: #374151;
    text-decoration: none;
    font-size: 0.875rem;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .quick-link:hover {
    background: white;
    border-color: #e5e7eb;
    color: #111827;
  }

  .quick-link svg {
    flex-shrink: 0;
  }

  /* Add to Cart */
  .add-to-cart-section {
    display: grid;
    grid-template-columns: 180px 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .quantity-selector {
    display: flex;
    align-items: center;
    border: 2px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    background: white;
  }

  .quantity-btn {
    width: 48px;
    height: 56px;
    background: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s ease;
    color: #374151;
  }

  .quantity-btn:hover {
    background: #f9fafb;
  }

  .quantity-btn:active {
    background: #f3f4f6;
  }

  #quantity {
    flex: 1;
    height: 56px;
    border: none;
    text-align: center;
    font-size: 1.125rem;
    font-weight: 600;
    background: white;
  }

  .add-to-cart-btn {
    height: 60px;
    background: #111827;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .add-to-cart-btn:hover:not(:disabled) {
    background: #1f2937;
    transform: translateY(-1px);
  }

  .add-to-cart-btn:disabled {
    background: #9ca3af;
    cursor: not-allowed;
  }

  /* Product Meta */
  .product-meta {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .meta-item {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid #f3f4f6;
    font-size: 0.875rem;
  }

  .meta-label {
    color: #6b7280;
    font-weight: 500;
  }

  .meta-value {
    color: #111827;
    font-weight: 600;
  }

  .meta-value.in-stock {
    color: #10b981;
  }

  .meta-value.out-stock {
    color: #ef4444;
  }

  /* Content Section */
  .content-section {
    margin-bottom: 4rem;
  }

  .section-tabs {
    display: flex;
    gap: 1rem;
    border-bottom: 2px solid #e5e7eb;
    margin-bottom: 2rem;
  }

  .tab-button {
    padding: 1rem 1.5rem;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    color: #6b7280;
    transition: all 0.2s ease;
    margin-bottom: -2px;
  }

  .tab-button:hover {
    color: #111827;
  }

  .tab-button.active {
    color: #111827;
    border-bottom-color: #111827;
  }

  .tab-pane {
    display: none;
  }

  .tab-pane.active {
    display: block;
    animation: fadeIn 0.3s ease;
  }

  .details-content h2,
  .details-content h3 {
    color: #111827;
    margin-bottom: 1rem;
  }

  .details-content h2 {
    font-size: 1.5rem;
    font-weight: 600;
  }

  .details-content h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin-top: 2rem;
  }

  .details-content p {
    color: #4b5563;
    line-height: 1.8;
    margin-bottom: 1rem;
  }

  .details-list ul,
  .important-info ul {
    list-style: none;
    padding: 0;
    margin: 1rem 0;
  }

  .details-list li,
  .important-info li {
    padding: 0.75rem 0;
    padding-left: 1.5rem;
    position: relative;
    color: #4b5563;
    line-height: 1.6;
  }

  .details-list li::before {
    content: "✓";
    position: absolute;
    left: 0;
    color: #10b981;
    font-weight: bold;
  }

  .important-info li::before {
    content: "−";
    position: absolute;
    left: 0;
    color: #f59e0b;
    font-weight: bold;
  }

  .important-info {
    background: #fef3c7;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid #f59e0b;
    margin-top: 2rem;
  }

  /* Measurements */
  .measurements-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
  }

  .measurements-diagram img {
    width: 100%;
    border-radius: 8px;
  }

  .measurements-specs h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 1.5rem;
  }

  .spec-grid {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .spec-item {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .spec-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .spec-value {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    line-height: 1.6;
  }

  /* Examples Section */
  .examples-section,
  .downloads-section,
  .trust-section {
    margin-bottom: 4rem;
  }

  .examples-section h2,
  .downloads-section h2,
  .trust-section h2 {
    font-size: 2rem;
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.5rem;
    text-align: center;
  }

  .section-subtitle {
    text-align: center;
    color: #6b7280;
    margin-bottom: 2.5rem;
    font-size: 1.125rem;
  }

  .examples-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }

  .example-item {
    border-radius: 12px;
    overflow: hidden;
    aspect-ratio: 4/3;
    background: #f9fafb;
  }

  .example-item.large {
    grid-column: span 2;
    grid-row: span 2;
  }

  .example-item img,
  .example-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .example-item.video-item {
    position: relative;
    cursor: pointer;
  }

  .video-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    opacity: 1;
    transition: opacity 0.3s ease;
  }

  .example-item.video-item:hover .video-overlay {
    opacity: 0.8;
  }

  /* Downloads Section */
  .downloads-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .download-card {
    display: flex;
    align-items: center;
    gap: 1.25rem;
    padding: 1.5rem;
    background: white;
    border: 2px solid #e5e7eb;
    border-radius: 12px;
    text-decoration: none;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .download-card:hover {
    border-color: #111827;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .download-icon {
    flex-shrink: 0;
    width: 56px;
    height: 56px;
    background: #f9fafb;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #111827;
  }

  .download-info {
    flex: 1;
  }

  .download-info h3 {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem 0;
  }

  .download-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.875rem;
    color: #6b7280;
  }

  .download-action {
    color: #111827;
  }

  /* Trust Section */
  .trust-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .trust-card {
    text-align: center;
    padding: 2rem;
  }

  .trust-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f9fafb;
    border-radius: 50%;
    color: #111827;
  }

  .trust-card h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 1rem 0;
  }

  .trust-card p {
    color: #6b7280;
    line-height: 1.6;
    margin: 0;
  }

  /* Trust Section Horizontal Layout */
  .trust-section {
    padding: 4rem 2rem;
    margin-left: -1.5rem;
    margin-right: -1.5rem;
    margin-bottom: 0;
  }

  .trust-header {
    text-align: left;
    margin-bottom: 3rem;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
  }

  .trust-header h2 {
    font-size: 2.5rem;
    font-weight: 600;
    color: #111827;
    text-align: left;
  }

  .trust-grid-horizontal {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 3rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  .trust-card-horizontal {
    display: flex;
    gap: 2rem;
    align-items: flex-start;
  }

  .trust-icon-horizontal {
    flex-shrink: 0;
    width: 80px;
    height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #111827;
  }

  .trust-content {
    flex: 1;
  }

  .trust-content h3 {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.75rem 0;
  }

  .trust-content p {
    color: #4b5563;
    line-height: 1.6;
    margin: 0;
    font-size: 0.9375rem;
  }

  /* New Tabs Styles */
  .specs-table {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .spec-row {
    display: grid;
    grid-template-columns: 200px 1fr;
    gap: 2rem;
    padding: 1rem;
    background: #f9fafb;
    border-radius: 8px;
  }

  .spec-name {
    font-weight: 600;
    color: #111827;
  }

  .spec-detail {
    color: #4b5563;
  }

  .finishes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
  }

  .finish-option {
    text-align: center;
  }

  .finish-swatch {
    width: 100%;
    height: 120px;
    border-radius: 12px;
    margin-bottom: 1rem;
    border: 2px solid #e5e7eb;
  }

  .finish-option h4 {
    font-size: 1rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem 0;
  }

  .finish-option p {
    font-size: 0.875rem;
    color: #6b7280;
    margin: 0;
  }

  .assembly-steps {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin: 2rem 0;
  }

  .step {
    display: flex;
    gap: 1.5rem;
    padding: 1.5rem;
    background: #f9fafb;
    border-radius: 12px;
  }

  .step-number {
    width: 48px;
    height: 48px;
    background: #111827;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    font-weight: 700;
    flex-shrink: 0;
  }

  .step-content h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem 0;
  }

  .step-content p {
    font-size: 0.9375rem;
    color: #4b5563;
    margin: 0;
  }

  .shipping-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin: 2rem 0;
  }

  .info-card {
    text-align: center;
    padding: 2rem;
    background: #f9fafb;
    border-radius: 12px;
  }

  .info-card svg {
    color: #111827;
    margin-bottom: 1rem;
  }

  .info-card h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #111827;
    margin: 0 0 0.5rem 0;
  }

  .info-card p {
    font-size: 0.9375rem;
    color: #6b7280;
    margin: 0;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .product-main {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .gallery-section {
      grid-template-columns: 80px 1fr;
    }

    .measurements-content {
      grid-template-columns: 1fr;
    }

    .examples-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .example-item.large {
      grid-column: span 1;
      grid-row: span 1;
    }
  }

  @media (max-width: 768px) {
    .product-page {
      padding: 0 1rem;
    }

    .gallery-section {
      grid-template-columns: 1fr;
      grid-template-rows: auto 80px;
    }

    .gallery-main {
      grid-row: 1;
      height: 450px;
    }

    .gallery-thumbnails {
      grid-row: 2;
      flex-direction: row;
      overflow-x: auto;
    }

    .add-to-cart-section {
      grid-template-columns: 1fr;
    }

    .section-tabs {
      overflow-x: auto;
    }

    .tab-button {
      white-space: nowrap;
    }

    .examples-grid {
      grid-template-columns: 1fr;
    }

    .trust-grid {
      grid-template-columns: 1fr;
    }

    .trust-grid-horizontal {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .trust-card-horizontal {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 1rem;
    }

    .trust-content {
      text-align: center;
    }

    .trust-header h2 {
      font-size: 1.75rem;
    }

    .trust-section {
      padding: 3rem 1rem;
    }

    .spec-row {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }

    .finishes-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .step {
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .shipping-info {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 480px) {
    .product-title {
      font-size: 1.5rem;
    }

    .breadcrumb {
      font-size: 0.75rem;
    }

    .downloads-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>

  import { addToCart } from "@/cart.ts";
  // Gallery functionality
  const thumbnails = document.querySelectorAll(".thumbnail");
  const mediaItems = document.querySelectorAll(".media-item");
  const addToCartBtn = document.querySelector(".add-to-cart-btn");



  addToCartBtn?.addEventListener("click", (e) => {
    if (!addToCartBtn.hasAttribute("disabled")) {
      const product = JSON.parse(e.target.dataset.product);
      product.quantity = parseInt(
        (document.getElementById("quantity") as HTMLInputElement).value
      );
      console.log(product);
      addToCart(product );
    }
  });

  thumbnails.forEach((thumb, index) => {
    thumb.addEventListener("click", () => {
      // Remove active class from all
      thumbnails.forEach((t) => t.classList.remove("active"));
      mediaItems.forEach((m) => m.classList.remove("active"));

      // Add active class to clicked
      thumb.classList.add("active");
      mediaItems[index].classList.add("active");
    });
  });

  // Quantity selector
  const decreaseBtn = document.getElementById("decreaseQty");
  const increaseBtn = document.getElementById("increaseQty");
  const quantityInput = document.getElementById("quantity") as HTMLInputElement;

  decreaseBtn?.addEventListener("click", () => {
    const currentValue = parseInt(quantityInput.value);
    if (currentValue > 1) {
      quantityInput.value = (currentValue - 1).toString();
    }
  });

  increaseBtn?.addEventListener("click", () => {
    const currentValue = parseInt(quantityInput.value);
    const maxValue = parseInt(quantityInput.max);
    if (currentValue < maxValue) {
      quantityInput.value = (currentValue + 1).toString();
    }
  });

  // Tabs functionality
  const tabButtons = document.querySelectorAll(".tab-button");
  const tabPanes = document.querySelectorAll(".tab-pane");

  tabButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const targetTab = button.getAttribute("data-tab");

      // Remove active class from all
      tabButtons.forEach((btn) => btn.classList.remove("active"));
      tabPanes.forEach((pane) => pane.classList.remove("active"));

      // Add active class to clicked
      button.classList.add("active");
      document.getElementById(targetTab!)?.classList.add("active");
    });
  });

  // Smooth scroll for quick links
  document.querySelectorAll(".quick-link").forEach((link) => {
    link.addEventListener("click", (e) => {
      e.preventDefault();
      const targetId = link.getAttribute("href")?.substring(1);
      const targetElement = document.getElementById(targetId!);

      if (targetElement) {
        targetElement.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
  });

</script>
